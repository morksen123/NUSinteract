{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport { useContext, useState, useEffect } from 'react';\nimport { UserContext } from \"../contexts/userContext\";\nimport { supabase } from \"../utils/supabase\";\nimport OutlinedButton from \"../components/Buttons/OutlinedButton\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nvar ActivityListScreen = function ActivityListScreen() {\n  var _useContext = useContext(UserContext),\n      user = _useContext.user;\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      data = _useState2[0],\n      setData = _useState2[1];\n\n  useEffect(function () {\n    var getData = function _callee() {\n      var _await$supabase$from$, data, error, filteredData;\n\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(supabase.from('joinActivity').select(\"\\n                    activity_id,\\n                    accepted,\\n                    hostActivity (\\n                        activity_details\\n                    )\\n                \").eq('user_id', user.id));\n\n            case 2:\n              _await$supabase$from$ = _context.sent;\n              data = _await$supabase$from$.data;\n              error = _await$supabase$from$.error;\n              filteredData = data.filter(function (activity) {\n                return activity.accepted === 'true';\n              });\n              setData(filteredData);\n\n            case 7:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    getData();\n  }, [data]);\n\n  function leaveActivityHandler(key) {\n    var deleteData = function _callee2() {\n      var _await$supabase$from$2, error, data;\n\n      return _regeneratorRuntime.async(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return _regeneratorRuntime.awrap(supabase.from('joinActivity').delete().match({\n                user_id: user.id,\n                activity_id: key\n              }));\n\n            case 2:\n              _await$supabase$from$2 = _context2.sent;\n              error = _await$supabase$from$2.error;\n              data = _await$supabase$from$2.data;\n\n            case 5:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    var temp = data.filter(function (activity) {\n      return activity['activity_id'] !== key;\n    });\n    setData(temp);\n    deleteData();\n  }\n\n  if (!data) {\n    return _jsxs(View, {\n      style: styles.container,\n      children: [_jsx(Text, {\n        children: \" List Of Joined Activities \"\n      }), _jsx(Text, {\n        children: \" You have not joined any activities yet! \"\n      })]\n    });\n  }\n\n  return _jsx(ScrollView, {\n    style: styles.bg,\n    children: _jsx(SafeAreaView, {\n      children: _jsx(View, {\n        style: styles.container,\n        children: _jsxs(View, {\n          children: [_jsx(Text, {\n            style: styles.joinedTitle,\n            children: \" Joined Activities \"\n          }), data.map(function (activity) {\n            return _jsxs(View, {\n              styles: styles.activity,\n              children: [_jsxs(View, {\n                style: styles.activitybubble,\n                children: [_jsx(View, {\n                  style: styles.paddingTop,\n                  children: _jsxs(Text, {\n                    children: [\"Activity Title: \", activity['hostActivity']['activity_details']['title']]\n                  })\n                }), _jsx(View, {\n                  children: _jsxs(Text, {\n                    children: [\"Time: \", activity['hostActivity']['activity_details']['time']]\n                  })\n                }), _jsx(View, {\n                  children: _jsxs(Text, {\n                    children: [\"Details: \", activity['hostActivity']['activity_details']['details']]\n                  })\n                }), _jsx(View, {\n                  style: styles.paddingBottom,\n                  children: _jsxs(Text, {\n                    children: [\"Location: \", activity['hostActivity']['activity_details']['location_details']]\n                  })\n                })]\n              }), _jsx(OutlinedButton, {\n                icon: \"log-out\",\n                onPress: function onPress() {\n                  return leaveActivityHandler(activity['activity_id']);\n                },\n                children: \"Leave Activity\"\n              })]\n            }, activity['activity_id']);\n          })]\n        })\n      })\n    })\n  });\n};\n\nexport default ActivityListScreen;\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    flexDirection: \"column\",\n    alignItems: 'center',\n    justifyContent: 'center',\n    backgroundColor: 'white'\n  },\n  joinedTitle: {\n    marginTop: 20,\n    paddingHorizontal: 10,\n    borderWidth: 4,\n    borderColor: \"#20232a\",\n    borderRadius: 6,\n    backgroundColor: '#7FFFD4',\n    color: \"#20232a\",\n    textAlign: \"center\",\n    fontSize: 30,\n    fontWeight: \"bold\",\n    fontFamily: \"AvenirNext-Italic\"\n  },\n  hostTitle: {\n    marginTop: 20,\n    paddingHorizontal: 10,\n    borderWidth: 4,\n    borderColor: \"#20232a\",\n    borderRadius: 6,\n    backgroundColor: '#F1836C',\n    color: \"#20232a\",\n    textAlign: \"center\",\n    fontSize: 30,\n    fontWeight: \"bold\",\n    fontFamily: \"AvenirNext-Italic\"\n  },\n  activity: {\n    marginTop: 10,\n    marginBottom: 10\n  },\n  activitybubble: {\n    marginTop: 10,\n    marginBottom: 10,\n    marginLeft: 10,\n    marginRight: 10,\n    justifyContent: 'center',\n    borderWidth: 2,\n    borderColor: \"#20232a\",\n    borderRadius: 6,\n    backgroundColor: '#7FFFD4',\n    paddingHorizontal: 10\n  },\n  formContainer: {\n    backgroundColor: 'white',\n    padding: 20,\n    flex: 1\n  },\n  paddingTop: {\n    paddingTop: 10\n  },\n  paddingBottom: {\n    paddingBottom: 10\n  }\n});","map":{"version":3,"names":["useContext","useState","useEffect","UserContext","supabase","OutlinedButton","ActivityListScreen","user","data","setData","getData","from","select","eq","id","error","filteredData","filter","activity","accepted","leaveActivityHandler","key","deleteData","delete","match","user_id","activity_id","temp","styles","container","bg","joinedTitle","map","activitybubble","paddingTop","paddingBottom","StyleSheet","create","flex","flexDirection","alignItems","justifyContent","backgroundColor","marginTop","paddingHorizontal","borderWidth","borderColor","borderRadius","color","textAlign","fontSize","fontWeight","fontFamily","hostTitle","marginBottom","marginLeft","marginRight","formContainer","padding"],"sources":["/Users/hanyang/Orbital2022/screens/ActivityListScreen.js"],"sourcesContent":["\nimport { StyleSheet, Text, View, ScrollView, SafeAreaView } from 'react-native';\n\nimport { useContext, useState, useEffect } from 'react';\n\nimport { UserContext } from '../contexts/userContext';\n\nimport { supabase } from '../utils/supabase';\n\nimport OutlinedButton from '../components/Buttons/OutlinedButton';\n\n\nconst ActivityListScreen = () => {\n    \n    const { user } = useContext(UserContext);\n\n\n    const [data, setData] = useState(null)\n\n    useEffect(() => {\n        const getData = async () => {\n            const { data, error } = await supabase\n                .from('joinActivity')\n                .select(`\n                    activity_id,\n                    accepted,\n                    hostActivity (\n                        activity_details\n                    )\n                `)\n                .eq('user_id', user.id)\n                \n                const filteredData = data.filter((activity) => activity.accepted === 'true')\n                // console.log(filteredData)\n                setData(filteredData)\n        }\n\n        getData();\n\n    }, [data])\n\n\n    function leaveActivityHandler(key) {\n\n        const deleteData = async () => {\n            const { error, data } = await supabase\n                .from('joinActivity')\n                .delete()\n                .match({ user_id: user.id, activity_id: key })\n        }\n\n        // console.log({ error, data }); \n        const temp = data.filter((activity) => activity['activity_id'] !== key)\n        setData(temp);\n        deleteData()  \n    }\n\n\n    if (!data) {\n        return (\n            <View style = {styles.container}>\n                <Text> List Of Joined Activities </Text>\n                <Text> You have not joined any activities yet! </Text>               \n            </View>\n        )\n    } \n\n\n    return (\n        \n        <ScrollView style = {styles.bg}>\n            <SafeAreaView>\n\n                <View style={styles.container}>\n                    <View>\n                        <Text style ={styles.joinedTitle}> Joined Activities </Text>\n                        {data.map((activity) => (\n\n                            <View styles={styles.activity} key={activity['activity_id']}>\n                                <View style= {styles.activitybubble}> \n                                    <View style={styles.paddingTop}>\n                                        <Text> \n                                            Activity Title: {activity['hostActivity']['activity_details']['title']} \n                                        </Text>\n                                    </View>\n\n                                    <View> \n                                        <Text> \n                                            Time: {activity['hostActivity']['activity_details']['time']} \n                                        </Text>\n                                    </View>\n\n                                    <View>\n                                        <Text> \n                                            Details: {activity['hostActivity']['activity_details']['details']} \n                                        </Text>\n                                    </View>\n\n                                    <View style= {styles.paddingBottom}>\n                                        <Text> \n                                            Location: {activity['hostActivity']['activity_details']['location_details']} \n                                        </Text>\n                                    </View>\n                                </View>\n\n                                <OutlinedButton \n                                    icon=\"log-out\" \n                                    onPress={() => leaveActivityHandler(activity['activity_id'])}\n                                > \n                                    Leave Activity \n                                </OutlinedButton>\n                            </View>\n                        ))}\n                    </View>\n                </View> \n            </SafeAreaView>\n        </ScrollView>  \n     )\n}\n\nexport default ActivityListScreen; \n\n\nconst styles = StyleSheet.create({\n\n    container: {\n        flex: 1,\n        flexDirection: \"column\",\n        alignItems: 'center',\n        justifyContent: 'center',\n        backgroundColor: 'white'\n    },\n\n    joinedTitle: {\n        marginTop: 20,\n        paddingHorizontal: 10,\n        borderWidth: 4,\n        borderColor: \"#20232a\",\n        borderRadius: 6,\n        backgroundColor: '#7FFFD4',\n        color: \"#20232a\",\n        textAlign: \"center\",\n        fontSize: 30,\n        fontWeight: \"bold\",\n        fontFamily: \"AvenirNext-Italic\",\n    },\n\n    hostTitle: {\n        marginTop: 20,\n        paddingHorizontal: 10,\n        borderWidth: 4,\n        borderColor: \"#20232a\",\n        borderRadius: 6,\n        backgroundColor: '#F1836C',\n        color: \"#20232a\",\n        textAlign: \"center\",\n        fontSize: 30,\n        fontWeight: \"bold\",\n        fontFamily: \"AvenirNext-Italic\",\n    },\n\n    activity: {\n        marginTop: 10,\n        marginBottom: 10,   \n    },\n\n    activitybubble:{\n        marginTop:10,\n        marginBottom:10,\n        marginLeft:10,\n        marginRight:10,\n        justifyContent: 'center',\n        borderWidth: 2,\n        borderColor: \"#20232a\",\n        borderRadius: 6,\n        backgroundColor: '#7FFFD4',\n        paddingHorizontal: 10\n    },\n\n    formContainer: {\n        backgroundColor: 'white', padding: 20, flex: 1,\n\n    },\n\n    paddingTop: {\n        paddingTop: 10\n    },\n\n    paddingBottom: {\n        paddingBottom: 10\n    }\n\n});"],"mappings":"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"},"metadata":{},"sourceType":"module"}