{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { Appbar } from 'react-native-paper';\nimport { useContext, useState, View } from 'react';\nimport { UserContext } from \"../../contexts/userContext\";\nimport { supabase } from \"../../utils/supabase\";\nimport CustomModal from \"../Dialog/CustomModal\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nvar SignInStackHeader = function SignInStackHeader(props) {\n  var navigation = props.navigation,\n      back = props.back;\n\n  var _useContext = useContext(UserContext),\n      setUser = _useContext.setUser;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      showModal = _useState2[0],\n      setShowModal = _useState2[1];\n\n  var signOutHandler = function _callee() {\n    var _await$supabase$auth$, event;\n\n    return _regeneratorRuntime.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(supabase.auth.signOut());\n\n          case 2:\n            _await$supabase$auth$ = _context.sent;\n            event = _await$supabase$auth$.event;\n            setUser(null);\n            console.log(event);\n\n          case 6:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var onPressAddHandler = function onPressAddHandler() {\n    navigation.navigate(\"Request\");\n  };\n\n  return _jsxs(Appbar.Header, {\n    style: {\n      backgroundColor: '#9E89FE'\n    },\n    dark: false,\n    children: [back ? _jsx(Appbar.BackAction, {\n      onPress: navigation.goBack\n    }) : null, _jsx(Appbar.Content, {\n      title: \"\"\n    }), _jsx(Appbar.Action, {\n      icon: \"account-multiple-plus\",\n      onPress: onPressAddHandler\n    }), _jsx(Appbar.Action, {\n      icon: \"logout\",\n      onPress: function onPress() {\n        return setShowModal(true);\n      }\n    }), showModal ? _jsx(CustomModal, {\n      onDoneHandler: signOutHandler,\n      onCancelHandler: function onCancelHandler() {\n        return setShowModal(false);\n      },\n      body: 'Logout from NUSinteract?',\n      title: 'Confim Logout'\n    }) : null]\n  });\n};\n\nexport default SignInStackHeader;","map":{"version":3,"names":["Appbar","useContext","useState","View","UserContext","supabase","CustomModal","SignInStackHeader","props","navigation","back","setUser","showModal","setShowModal","signOutHandler","auth","signOut","event","console","log","onPressAddHandler","navigate","backgroundColor","goBack"],"sources":["/Users/hanyang/Orbital2022/components/header/SignInStackHeader.js"],"sourcesContent":["import { Appbar } from 'react-native-paper';\n\nimport { useContext, useState, View } from 'react';\n\nimport { UserContext } from '../../contexts/userContext';\n\nimport { supabase } from '../../utils/supabase';\n\nimport CustomModal from '../Dialog/CustomModal';\n\nconst SignInStackHeader = (props) => {\n\n  const { navigation, back } = props\n\n  const { setUser } = useContext(UserContext);\n\n  const [showModal, setShowModal] = useState(false)\n\n  const signOutHandler = async () => {\n    const { event } = await supabase.auth.signOut()\n    setUser(null)\n    console.log(event)\n  }\n  \n  const onPressAddHandler = () => {\n    navigation.navigate(\"Request\")\n  }\n\n  return (\n    \n    <Appbar.Header style={{backgroundColor: '#9E89FE'}} dark={false}>\n    {back ? <Appbar.BackAction onPress={navigation.goBack} /> : null}\n            <Appbar.Content title=''/>\n            <Appbar.Action icon=\"account-multiple-plus\" onPress={onPressAddHandler} />\n            <Appbar.Action icon=\"logout\" onPress={() => setShowModal(true)}/>\n            { \n              showModal ? \n              <CustomModal\n                  onDoneHandler={signOutHandler}\n                  onCancelHandler={() => setShowModal(false)}\n                  body={'Logout from NUSinteract?'}\n                  title={'Confim Logout'}\n              /> : null \n          }\n    </Appbar.Header>\n\n  );\n};\n\nexport default SignInStackHeader;"],"mappings":";;AAAA,SAASA,MAAT,QAAuB,oBAAvB;AAEA,SAASC,UAAT,EAAqBC,QAArB,EAA+BC,IAA/B,QAA2C,OAA3C;AAEA,SAASC,WAAT;AAEA,SAASC,QAAT;AAEA,OAAOC,WAAP;;;;AAEA,IAAMC,iBAAiB,GAAG,SAApBA,iBAAoB,CAACC,KAAD,EAAW;EAEnC,IAAQC,UAAR,GAA6BD,KAA7B,CAAQC,UAAR;EAAA,IAAoBC,IAApB,GAA6BF,KAA7B,CAAoBE,IAApB;;EAEA,kBAAoBT,UAAU,CAACG,WAAD,CAA9B;EAAA,IAAQO,OAAR,eAAQA,OAAR;;EAEA,gBAAkCT,QAAQ,CAAC,KAAD,CAA1C;EAAA;EAAA,IAAOU,SAAP;EAAA,IAAkBC,YAAlB;;EAEA,IAAMC,cAAc,GAAG;IAAA;;IAAA;MAAA;QAAA;UAAA;YAAA;YAAA,iCACGT,QAAQ,CAACU,IAAT,CAAcC,OAAd,EADH;;UAAA;YAAA;YACbC,KADa,yBACbA,KADa;YAErBN,OAAO,CAAC,IAAD,CAAP;YACAO,OAAO,CAACC,GAAR,CAAYF,KAAZ;;UAHqB;UAAA;YAAA;QAAA;MAAA;IAAA;EAAA,CAAvB;;EAMA,IAAMG,iBAAiB,GAAG,SAApBA,iBAAoB,GAAM;IAC9BX,UAAU,CAACY,QAAX,CAAoB,SAApB;EACD,CAFD;;EAIA,OAEE,MAAC,MAAD,CAAQ,MAAR;IAAe,KAAK,EAAE;MAACC,eAAe,EAAE;IAAlB,CAAtB;IAAoD,IAAI,EAAE,KAA1D;IAAA,WACCZ,IAAI,GAAG,KAAC,MAAD,CAAQ,UAAR;MAAmB,OAAO,EAAED,UAAU,CAACc;IAAvC,EAAH,GAAuD,IAD5D,EAEQ,KAAC,MAAD,CAAQ,OAAR;MAAgB,KAAK,EAAC;IAAtB,EAFR,EAGQ,KAAC,MAAD,CAAQ,MAAR;MAAe,IAAI,EAAC,uBAApB;MAA4C,OAAO,EAAEH;IAArD,EAHR,EAIQ,KAAC,MAAD,CAAQ,MAAR;MAAe,IAAI,EAAC,QAApB;MAA6B,OAAO,EAAE;QAAA,OAAMP,YAAY,CAAC,IAAD,CAAlB;MAAA;IAAtC,EAJR,EAMUD,SAAS,GACT,KAAC,WAAD;MACI,aAAa,EAAEE,cADnB;MAEI,eAAe,EAAE;QAAA,OAAMD,YAAY,CAAC,KAAD,CAAlB;MAAA,CAFrB;MAGI,IAAI,EAAE,0BAHV;MAII,KAAK,EAAE;IAJX,EADS,GAMJ,IAZf;EAAA,EAFF;AAmBD,CArCD;;AAuCA,eAAeN,iBAAf"},"metadata":{},"sourceType":"module"}