{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport * as React from 'react';\nimport { Card, Button, Text } from 'react-native-paper';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport { SafeAreaView } from 'react-native-safe-area-context';\nimport { View } from 'react-native-animatable';\nimport { supabase } from \"../../utils/supabase\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nvar RequestCard = function RequestCard(props) {\n  var username = props.username,\n      title = props.title,\n      userID = props.userID,\n      activityID = props.activityID,\n      hostActivityData = props.hostActivityData,\n      setHostActivityData = props.setHostActivityData,\n      id = props.id;\n\n  var onAcceptHandler = function onAcceptHandler() {\n    acceptRequest();\n    addUserToChatGroup();\n    var filteredData = hostActivityData.filter(function (activity) {\n      return activity.id !== id;\n    });\n    setHostActivityData(filteredData);\n  };\n\n  var acceptRequest = function _callee() {\n    var _await$supabase$from$, error, data;\n\n    return _regeneratorRuntime.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(supabase.from('joinActivity').upsert({\n              user_id: userID,\n              activity_id: activityID,\n              accepted: 'true'\n            }));\n\n          case 2:\n            _await$supabase$from$ = _context.sent;\n            error = _await$supabase$from$.error;\n            data = _await$supabase$from$.data;\n\n          case 5:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var addUserToChatGroup = function _callee2() {\n    var _await$supabase$from$2, error, data;\n\n    return _regeneratorRuntime.async(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _regeneratorRuntime.awrap(supabase.from('room_participants').insert([{\n              room_id: activityID,\n              profile_id: userID\n            }]));\n\n          case 2:\n            _await$supabase$from$2 = _context2.sent;\n            error = _await$supabase$from$2.error;\n            data = _await$supabase$from$2.data;\n\n          case 5:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var onDeclineHandler = function onDeclineHandler() {\n    var declineRequest = function _callee3() {\n      var _await$supabase$from$3, error, data, filteredData;\n\n      return _regeneratorRuntime.async(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return _regeneratorRuntime.awrap(supabase.from('joinActivity').upsert({\n                user_id: userID,\n                activity_id: activityID,\n                accepted: 'false'\n              }));\n\n            case 2:\n              _await$supabase$from$3 = _context3.sent;\n              error = _await$supabase$from$3.error;\n              data = _await$supabase$from$3.data;\n              filteredData = hostActivityData.filter(function (activity) {\n                return activity.id !== id;\n              });\n              setHostActivityData(filteredData);\n\n            case 7:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    declineRequest();\n  };\n\n  return _jsx(SafeAreaView, {\n    children: _jsxs(Card, {\n      children: [_jsxs(View, {\n        children: [_jsxs(Text, {\n          children: [\"User: \", username]\n        }), _jsxs(Text, {\n          children: [\"Activity: \", title]\n        })]\n      }), _jsxs(Card.Actions, {\n        style: {\n          justifyContent: 'flex-end'\n        },\n        children: [_jsx(Button, {\n          style: styles.button,\n          mode: \"contained\",\n          onPress: onAcceptHandler,\n          children: \"Accept\"\n        }), _jsx(Button, {\n          style: styles.button,\n          mode: \"outlined\",\n          onPress: onDeclineHandler,\n          children: \"Decline\"\n        })]\n      })]\n    })\n  });\n};\n\nexport default RequestCard;\nvar styles = StyleSheet.create({\n  button: {\n    marginLeft: 10,\n    padding: 5,\n    borderRadius: 20\n  }\n});","map":{"version":3,"names":["React","Card","Button","Text","SafeAreaView","View","supabase","RequestCard","props","username","title","userID","activityID","hostActivityData","setHostActivityData","id","onAcceptHandler","acceptRequest","addUserToChatGroup","filteredData","filter","activity","from","upsert","user_id","activity_id","accepted","error","data","insert","room_id","profile_id","onDeclineHandler","declineRequest","justifyContent","styles","button","StyleSheet","create","marginLeft","padding","borderRadius"],"sources":["/Users/hanyang/Orbital2022/components/hostActivity/RequestCard.js"],"sourcesContent":["import * as React from 'react';\nimport { Card, Button, Text } from 'react-native-paper';\n\nimport { StyleSheet } from 'react-native';\n\nimport { SafeAreaView } from 'react-native-safe-area-context';\nimport { View } from 'react-native-animatable';\nimport { supabase } from '../../utils/supabase';\n\nconst RequestCard = (props) => {\n\n    const {\n        username,\n        title, \n        userID,\n        activityID,\n        hostActivityData,\n        setHostActivityData,\n        id\n    } = props;\n    \n\n    /**\n     * @desc Upon accepting request, updates accepted column in \n     * joinActivity table to true, and deletes the request from screen\n     */\n    const onAcceptHandler = () => {\n\n            acceptRequest();\n            addUserToChatGroup();\n                \n            const filteredData = hostActivityData.filter((activity) => activity.id !== id)\n            setHostActivityData(filteredData)     \n    }\n\n    const acceptRequest = async () => {\n        const { error, data } = await supabase\n            .from('joinActivity')\n            .upsert({\n                user_id: userID, \n                activity_id: activityID,\n                accepted: 'true'\n            }) \n    }\n\n    const addUserToChatGroup = async () => {\n        const { error, data } = await supabase\n            .from('room_participants')\n            .insert([{\n                room_id: activityID,\n                profile_id: userID\n            }])\n    }\n\n    const onDeclineHandler = () => {\n\n        const declineRequest = async () => {\n            const { error, data } = await supabase\n                .from('joinActivity')\n                .upsert({\n                    user_id: userID, \n                    activity_id: activityID,\n                    accepted: 'false'\n                }) \n                \n                const filteredData = hostActivityData.filter((activity) => activity.id !== id)\n                setHostActivityData(filteredData)     \n        }\n\n        declineRequest()\n\n    }\n    \n\n    return (\n        <SafeAreaView>\n        <Card>\n            <View>\n                <Text>User: {username}</Text>\n                <Text>Activity: {title}</Text>\n            </View>\n            <Card.Actions style={{ justifyContent:'flex-end' }}>\n                <Button \n                    style={styles.button} \n                    mode='contained'\n                    onPress={onAcceptHandler}\n                >\n                    Accept\n                </Button>\n                <Button \n                    style={styles.button} \n                    mode='outlined'\n                    onPress={onDeclineHandler}\n                >\n                    Decline\n                </Button>\n            </Card.Actions>\n        </Card>\n    </SafeAreaView> \n    )   \n};\n\nexport default RequestCard;\n\nconst styles = StyleSheet.create({\n    button: {\n        marginLeft: 10,\n        padding: 5,\n        borderRadius: 20,\n    }\n})"],"mappings":";AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AACA,SAASC,IAAT,EAAeC,MAAf,EAAuBC,IAAvB,QAAmC,oBAAnC;;AAIA,SAASC,YAAT,QAA6B,gCAA7B;AACA,SAASC,IAAT,QAAqB,yBAArB;AACA,SAASC,QAAT;;;;AAEA,IAAMC,WAAW,GAAG,SAAdA,WAAc,CAACC,KAAD,EAAW;EAE3B,IACIC,QADJ,GAQID,KARJ,CACIC,QADJ;EAAA,IAEIC,KAFJ,GAQIF,KARJ,CAEIE,KAFJ;EAAA,IAGIC,MAHJ,GAQIH,KARJ,CAGIG,MAHJ;EAAA,IAIIC,UAJJ,GAQIJ,KARJ,CAIII,UAJJ;EAAA,IAKIC,gBALJ,GAQIL,KARJ,CAKIK,gBALJ;EAAA,IAMIC,mBANJ,GAQIN,KARJ,CAMIM,mBANJ;EAAA,IAOIC,EAPJ,GAQIP,KARJ,CAOIO,EAPJ;;EAeA,IAAMC,eAAe,GAAG,SAAlBA,eAAkB,GAAM;IAEtBC,aAAa;IACbC,kBAAkB;IAElB,IAAMC,YAAY,GAAGN,gBAAgB,CAACO,MAAjB,CAAwB,UAACC,QAAD;MAAA,OAAcA,QAAQ,CAACN,EAAT,KAAgBA,EAA9B;IAAA,CAAxB,CAArB;IACAD,mBAAmB,CAACK,YAAD,CAAnB;EACP,CAPD;;EASA,IAAMF,aAAa,GAAG;IAAA;;IAAA;MAAA;QAAA;UAAA;YAAA;YAAA,iCACYX,QAAQ,CACjCgB,IADyB,CACpB,cADoB,EAEzBC,MAFyB,CAElB;cACJC,OAAO,EAAEb,MADL;cAEJc,WAAW,EAAEb,UAFT;cAGJc,QAAQ,EAAE;YAHN,CAFkB,CADZ;;UAAA;YAAA;YACVC,KADU,yBACVA,KADU;YACHC,IADG,yBACHA,IADG;;UAAA;UAAA;YAAA;QAAA;MAAA;IAAA;EAAA,CAAtB;;EAUA,IAAMV,kBAAkB,GAAG;IAAA;;IAAA;MAAA;QAAA;UAAA;YAAA;YAAA,iCACOZ,QAAQ,CACjCgB,IADyB,CACpB,mBADoB,EAEzBO,MAFyB,CAElB,CAAC;cACLC,OAAO,EAAElB,UADJ;cAELmB,UAAU,EAAEpB;YAFP,CAAD,CAFkB,CADP;;UAAA;YAAA;YACfgB,KADe,0BACfA,KADe;YACRC,IADQ,0BACRA,IADQ;;UAAA;UAAA;YAAA;QAAA;MAAA;IAAA;EAAA,CAA3B;;EASA,IAAMI,gBAAgB,GAAG,SAAnBA,gBAAmB,GAAM;IAE3B,IAAMC,cAAc,GAAG;MAAA;;MAAA;QAAA;UAAA;YAAA;cAAA;cAAA,iCACW3B,QAAQ,CACjCgB,IADyB,CACpB,cADoB,EAEzBC,MAFyB,CAElB;gBACJC,OAAO,EAAEb,MADL;gBAEJc,WAAW,EAAEb,UAFT;gBAGJc,QAAQ,EAAE;cAHN,CAFkB,CADX;;YAAA;cAAA;cACXC,KADW,0BACXA,KADW;cACJC,IADI,0BACJA,IADI;cASTT,YATS,GASMN,gBAAgB,CAACO,MAAjB,CAAwB,UAACC,QAAD;gBAAA,OAAcA,QAAQ,CAACN,EAAT,KAAgBA,EAA9B;cAAA,CAAxB,CATN;cAUfD,mBAAmB,CAACK,YAAD,CAAnB;;YAVe;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA,CAAvB;;IAaAc,cAAc;EAEjB,CAjBD;;EAoBA,OACI,KAAC,YAAD;IAAA,UACA,MAAC,IAAD;MAAA,WACI,MAAC,IAAD;QAAA,WACI,MAAC,IAAD;UAAA,qBAAaxB,QAAb;QAAA,EADJ,EAEI,MAAC,IAAD;UAAA,yBAAiBC,KAAjB;QAAA,EAFJ;MAAA,EADJ,EAKI,MAAC,IAAD,CAAM,OAAN;QAAc,KAAK,EAAE;UAAEwB,cAAc,EAAC;QAAjB,CAArB;QAAA,WACI,KAAC,MAAD;UACI,KAAK,EAAEC,MAAM,CAACC,MADlB;UAEI,IAAI,EAAC,WAFT;UAGI,OAAO,EAAEpB,eAHb;UAAA;QAAA,EADJ,EAQI,KAAC,MAAD;UACI,KAAK,EAAEmB,MAAM,CAACC,MADlB;UAEI,IAAI,EAAC,UAFT;UAGI,OAAO,EAAEJ,gBAHb;UAAA;QAAA,EARJ;MAAA,EALJ;IAAA;EADA,EADJ;AA0BH,CA3FD;;AA6FA,eAAezB,WAAf;AAEA,IAAM4B,MAAM,GAAGE,UAAU,CAACC,MAAX,CAAkB;EAC7BF,MAAM,EAAE;IACJG,UAAU,EAAE,EADR;IAEJC,OAAO,EAAE,CAFL;IAGJC,YAAY,EAAE;EAHV;AADqB,CAAlB,CAAf"},"metadata":{},"sourceType":"module"}