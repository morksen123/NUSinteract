{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { useState, useEffect } from \"react\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport { supabase } from \"../utils/supabase\";\nimport { Modal, Portal, Text, Button, Provider } from 'react-native-paper';\nimport ProfileForm from \"../components/profile/profileForm\";\nimport HostActivityForm from \"../components/hostActivity/HostActivityForm\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function ProfileScreen() {\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      visible = _useState2[0],\n      setVisible = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      user = _useState4[0],\n      setUser = _useState4[1];\n\n  var _useState5 = useState(null),\n      _useState6 = _slicedToArray(_useState5, 2),\n      session = _useState6[0],\n      setSession = _useState6[1];\n\n  useEffect(function () {\n    var _session$user;\n\n    var session = supabase.auth.session();\n    setSession(session);\n    setUser((_session$user = session == null ? void 0 : session.user) != null ? _session$user : null);\n\n    var _supabase$auth$onAuth = supabase.auth.onAuthStateChange(function (event, session) {\n      var _session$user2;\n\n      console.log(event);\n      setSession(session);\n      setUser((_session$user2 = session == null ? void 0 : session.user) != null ? _session$user2 : null);\n    }),\n        authListender = _supabase$auth$onAuth.data;\n\n    return function () {\n      authListender.unsubscribe();\n    };\n  }, []);\n\n  var showModal = function showModal() {\n    return setVisible(true);\n  };\n\n  var hideModal = function hideModal() {\n    return setVisible(false);\n  };\n\n  var containerStyle = {\n    backgroundColor: 'white',\n    padding: 20\n  };\n  return _jsxs(Provider, {\n    children: [_jsx(Portal, {\n      children: _jsx(Modal, {\n        visible: visible,\n        contentContainerStyle: containerStyle,\n        children: _jsx(HostActivityForm, {\n          onPressHandler: hideModal\n        })\n      })\n    }), _jsxs(View, {\n      style: {\n        flex: 1,\n        alignItems: 'center',\n        justifyContent: 'center'\n      },\n      children: [_jsxs(Text, {\n        children: [\"Username: \", session ? user.user_metadata.username : 'nothing']\n      }), _jsx(Button, {\n        style: {\n          marginTop: 30\n        },\n        onPress: showModal,\n        children: \"Update Status\"\n      })]\n    })]\n  });\n}\nvar styles = StyleSheet.create({\n  container: {\n    marginTop: 40,\n    padding: 12\n  },\n  verticallySpaced: {\n    paddingTop: 4,\n    paddingBottom: 4,\n    alignSelf: \"stretch\"\n  },\n  mt20: {\n    marginTop: 20\n  }\n});","map":{"version":3,"names":["useState","useEffect","supabase","Modal","Portal","Text","Button","Provider","ProfileForm","HostActivityForm","ProfileScreen","visible","setVisible","user","setUser","session","setSession","auth","onAuthStateChange","event","console","log","authListender","data","unsubscribe","showModal","hideModal","containerStyle","backgroundColor","padding","flex","alignItems","justifyContent","user_metadata","username","marginTop","styles","StyleSheet","create","container","verticallySpaced","paddingTop","paddingBottom","alignSelf","mt20"],"sources":["/Users/hanyang/Orbital2022/screens/ProfileScreen.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport { StyleSheet, View, Alert } from \"react-native\";\n\nimport { supabase } from '../utils/supabase';\n\nimport { Modal, Portal, Text, Button, Provider } from 'react-native-paper';\n\nimport ProfileForm from \"../components/profile/profileForm\";\nimport HostActivityForm from \"../components/hostActivity/HostActivityForm\";\n\nexport default function ProfileScreen() {\n    \n  const [visible, setVisible] = useState(false);\n  const [user, setUser] = useState(\"\");\n  const [session, setSession] = useState(null);\n\n  useEffect(() => {\n    const session = supabase.auth.session(); \n    setSession(session)\n    setUser(session?.user ?? null);\n\n    const { data: authListender } = supabase.auth.onAuthStateChange(\n        (event, session) => {\n            console.log(event)\n            setSession(session)\n            setUser(session?.user ?? null);\n        })\n\n        return () => {\n            authListender.unsubscribe();\n        }\n  }, [])\n  \n    const showModal = () => setVisible(true);\n    const hideModal = () => setVisible(false);\n    const containerStyle = {backgroundColor: 'white', padding: 20};\n\n\n  return (\n    <Provider>\n    <Portal>\n      <Modal visible={visible} contentContainerStyle={containerStyle}>\n        <HostActivityForm\n          onPressHandler={hideModal}\n        />\n      </Modal>\n    </Portal>\n\n    <View style={{ flex: 1, alignItems: 'center', justifyContent: 'center' }}>\n        <Text>Username: {session ? user.user_metadata.username : 'nothing'}</Text>\n        <Button style={{marginTop: 30}} onPress={showModal}>\n        Update Status\n        </Button>\n    </View>\n\n  </Provider>\n  );\n}\n\n\nconst styles = StyleSheet.create({\n  container: {\n    marginTop: 40,\n    padding: 12,\n  },\n  verticallySpaced: {\n    paddingTop: 4,\n    paddingBottom: 4,\n    alignSelf: \"stretch\",\n  },\n  mt20: {\n    marginTop: 20,\n  },\n});"],"mappings":";AAAA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;;;;AAGA,SAASC,QAAT;AAEA,SAASC,KAAT,EAAgBC,MAAhB,EAAwBC,IAAxB,EAA8BC,MAA9B,EAAsCC,QAAtC,QAAsD,oBAAtD;AAEA,OAAOC,WAAP;AACA,OAAOC,gBAAP;;;AAEA,eAAe,SAASC,aAAT,GAAyB;EAEtC,gBAA8BV,QAAQ,CAAC,KAAD,CAAtC;EAAA;EAAA,IAAOW,OAAP;EAAA,IAAgBC,UAAhB;;EACA,iBAAwBZ,QAAQ,CAAC,EAAD,CAAhC;EAAA;EAAA,IAAOa,IAAP;EAAA,IAAaC,OAAb;;EACA,iBAA8Bd,QAAQ,CAAC,IAAD,CAAtC;EAAA;EAAA,IAAOe,OAAP;EAAA,IAAgBC,UAAhB;;EAEAf,SAAS,CAAC,YAAM;IAAA;;IACd,IAAMc,OAAO,GAAGb,QAAQ,CAACe,IAAT,CAAcF,OAAd,EAAhB;IACAC,UAAU,CAACD,OAAD,CAAV;IACAD,OAAO,kBAACC,OAAD,oBAACA,OAAO,CAAEF,IAAV,4BAAkB,IAAlB,CAAP;;IAEA,4BAAgCX,QAAQ,CAACe,IAAT,CAAcC,iBAAd,CAC5B,UAACC,KAAD,EAAQJ,OAAR,EAAoB;MAAA;;MAChBK,OAAO,CAACC,GAAR,CAAYF,KAAZ;MACAH,UAAU,CAACD,OAAD,CAAV;MACAD,OAAO,mBAACC,OAAD,oBAACA,OAAO,CAAEF,IAAV,6BAAkB,IAAlB,CAAP;IACH,CAL2B,CAAhC;IAAA,IAAcS,aAAd,yBAAQC,IAAR;;IAOI,OAAO,YAAM;MACTD,aAAa,CAACE,WAAd;IACH,CAFD;EAGL,CAfQ,EAeN,EAfM,CAAT;;EAiBE,IAAMC,SAAS,GAAG,SAAZA,SAAY;IAAA,OAAMb,UAAU,CAAC,IAAD,CAAhB;EAAA,CAAlB;;EACA,IAAMc,SAAS,GAAG,SAAZA,SAAY;IAAA,OAAMd,UAAU,CAAC,KAAD,CAAhB;EAAA,CAAlB;;EACA,IAAMe,cAAc,GAAG;IAACC,eAAe,EAAE,OAAlB;IAA2BC,OAAO,EAAE;EAApC,CAAvB;EAGF,OACE,MAAC,QAAD;IAAA,WACA,KAAC,MAAD;MAAA,UACE,KAAC,KAAD;QAAO,OAAO,EAAElB,OAAhB;QAAyB,qBAAqB,EAAEgB,cAAhD;QAAA,UACE,KAAC,gBAAD;UACE,cAAc,EAAED;QADlB;MADF;IADF,EADA,EASA,MAAC,IAAD;MAAM,KAAK,EAAE;QAAEI,IAAI,EAAE,CAAR;QAAWC,UAAU,EAAE,QAAvB;QAAiCC,cAAc,EAAE;MAAjD,CAAb;MAAA,WACI,MAAC,IAAD;QAAA,yBAAiBjB,OAAO,GAAGF,IAAI,CAACoB,aAAL,CAAmBC,QAAtB,GAAiC,SAAzD;MAAA,EADJ,EAEI,KAAC,MAAD;QAAQ,KAAK,EAAE;UAACC,SAAS,EAAE;QAAZ,CAAf;QAAgC,OAAO,EAAEV,SAAzC;QAAA;MAAA,EAFJ;IAAA,EATA;EAAA,EADF;AAmBD;AAGD,IAAMW,MAAM,GAAGC,UAAU,CAACC,MAAX,CAAkB;EAC/BC,SAAS,EAAE;IACTJ,SAAS,EAAE,EADF;IAETN,OAAO,EAAE;EAFA,CADoB;EAK/BW,gBAAgB,EAAE;IAChBC,UAAU,EAAE,CADI;IAEhBC,aAAa,EAAE,CAFC;IAGhBC,SAAS,EAAE;EAHK,CALa;EAU/BC,IAAI,EAAE;IACJT,SAAS,EAAE;EADP;AAVyB,CAAlB,CAAf"},"metadata":{},"sourceType":"module"}