{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { createContext, useState, useEffect } from \"react\";\nimport { supabase } from \"../utils/supabase\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport var UserContext = createContext({\n  user: null,\n  setUser: function setUser() {\n    return null;\n  }\n});\nexport var UserProvider = function UserProvider(_ref) {\n  var children = _ref.children;\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      user = _useState2[0],\n      setUser = _useState2[1];\n\n  var value = {\n    user: user,\n    setUser: setUser\n  };\n  useEffect(function () {\n    var session = supabase.auth.session();\n    session ? setUser(session.user) : setUser(null);\n\n    var _supabase$auth$onAuth = supabase.auth.onAuthStateChange(function (session) {\n      session ? setUser(session.user) : null;\n    }),\n        authListender = _supabase$auth$onAuth.data;\n\n    return function () {\n      authListender.unsubscribe();\n    };\n  }, []);\n  return _jsx(UserContext.Provider, {\n    value: value,\n    children: children\n  });\n};","map":{"version":3,"names":["createContext","useState","useEffect","supabase","UserContext","user","setUser","UserProvider","children","value","session","auth","onAuthStateChange","authListender","data","unsubscribe"],"sources":["/Users/hanyang/Orbital2022/contexts/userContext.js"],"sourcesContent":["import { createContext, useState, useEffect } from \"react\";\n\nimport { supabase } from \"../utils/supabase\";\n\nexport const UserContext = createContext({\n    user: null, \n    setUser: () => null, \n}); \n\nexport const UserProvider = ({ children }) => {\n    const [user, setUser] = useState(null);\n    const value = { user, setUser };\n\n    useEffect(() => {\n        const session = supabase.auth.session(); \n        session ? setUser(session.user) : setUser(null)\n    \n        const { data: authListender } = supabase.auth.onAuthStateChange(\n            (session) => {\n                session ? setUser(session.user) : null; \n            })\n    \n            return () => {\n                authListender.unsubscribe();\n            }\n    }, [])\n\n    return <UserContext.Provider value={value}>{children}</UserContext.Provider>\n}\n\n\n    \n"],"mappings":";AAAA,SAASA,aAAT,EAAwBC,QAAxB,EAAkCC,SAAlC,QAAmD,OAAnD;AAEA,SAASC,QAAT;;AAEA,OAAO,IAAMC,WAAW,GAAGJ,aAAa,CAAC;EACrCK,IAAI,EAAE,IAD+B;EAErCC,OAAO,EAAE;IAAA,OAAM,IAAN;EAAA;AAF4B,CAAD,CAAjC;AAKP,OAAO,IAAMC,YAAY,GAAG,SAAfA,YAAe,OAAkB;EAAA,IAAfC,QAAe,QAAfA,QAAe;;EAC1C,gBAAwBP,QAAQ,CAAC,IAAD,CAAhC;EAAA;EAAA,IAAOI,IAAP;EAAA,IAAaC,OAAb;;EACA,IAAMG,KAAK,GAAG;IAAEJ,IAAI,EAAJA,IAAF;IAAQC,OAAO,EAAPA;EAAR,CAAd;EAEAJ,SAAS,CAAC,YAAM;IACZ,IAAMQ,OAAO,GAAGP,QAAQ,CAACQ,IAAT,CAAcD,OAAd,EAAhB;IACAA,OAAO,GAAGJ,OAAO,CAACI,OAAO,CAACL,IAAT,CAAV,GAA2BC,OAAO,CAAC,IAAD,CAAzC;;IAEA,4BAAgCH,QAAQ,CAACQ,IAAT,CAAcC,iBAAd,CAC5B,UAACF,OAAD,EAAa;MACTA,OAAO,GAAGJ,OAAO,CAACI,OAAO,CAACL,IAAT,CAAV,GAA2B,IAAlC;IACH,CAH2B,CAAhC;IAAA,IAAcQ,aAAd,yBAAQC,IAAR;;IAKI,OAAO,YAAM;MACTD,aAAa,CAACE,WAAd;IACH,CAFD;EAGP,CAZQ,EAYN,EAZM,CAAT;EAcA,OAAO,KAAC,WAAD,CAAa,QAAb;IAAsB,KAAK,EAAEN,KAA7B;IAAA,UAAqCD;EAArC,EAAP;AACH,CAnBM"},"metadata":{},"sourceType":"module"}