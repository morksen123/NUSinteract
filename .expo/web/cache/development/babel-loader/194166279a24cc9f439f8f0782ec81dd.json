{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { useState, useContext, useEffect } from \"react\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport { Modal, Portal, Text, Button, Provider } from 'react-native-paper';\nimport ProfileForm from \"../components/profile/ProfileForm\";\nimport Avatar from \"../components/profile/Avatar\";\nimport { supabase } from \"../utils/supabase\";\nimport { UserContext } from \"../contexts/userContext\";\nimport OutlinedButton from \"../components/Buttons/OutlinedButton\";\nimport 'react-native-url-polyfill/auto';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nvar ProfileScreen = function ProfileScreen() {\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      visible = _useState2[0],\n      setVisible = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      userData = _useState4[0],\n      setUserData = _useState4[1];\n\n  var _useState5 = useState('Tell us more about yourself!'),\n      _useState6 = _slicedToArray(_useState5, 2),\n      details = _useState6[0],\n      setDetails = _useState6[1];\n\n  var _useState7 = useState(true),\n      _useState8 = _slicedToArray(_useState7, 2),\n      loading = _useState8[0],\n      setLoading = _useState8[1];\n\n  var _useContext = useContext(UserContext),\n      user = _useContext.user;\n\n  var showModal = function showModal() {\n    return setVisible(true);\n  };\n\n  var hideModal = function hideModal() {\n    return setVisible(false);\n  };\n\n  var containerStyle = {\n    backgroundColor: 'white',\n    padding: 20\n  };\n  useEffect(function () {\n    var getUserData = function _callee() {\n      var _await$supabase$from$, error, data;\n\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(supabase.from('users').select('*').eq('id', user.id));\n\n            case 2:\n              _await$supabase$from$ = _context.sent;\n              error = _await$supabase$from$.error;\n              data = _await$supabase$from$.data;\n              setUserData(data);\n              setLoading(false);\n              setDetails(data[0].status);\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    getUserData();\n  }, []);\n  useEffect(function () {\n    var subscription = supabase.from('users').on('UPDATE', function (payload) {\n      setDetails(function () {\n        return setDetails(payload.new.status);\n      });\n    }).subscribe();\n    return function () {\n      supabase.removeSubscription(subscription);\n    };\n  }, []);\n  return _jsxs(Provider, {\n    children: [_jsx(Portal, {\n      children: _jsx(Modal, {\n        visible: visible,\n        contentContainerStyle: containerStyle,\n        children: _jsx(ProfileForm, {\n          onPressHandler: hideModal\n        })\n      })\n    }), loading ? _jsx(ActivityIndicator, {\n      size: \"small\",\n      color: \"#0000ff\"\n    }) : _jsxs(View, {\n      style: styles.entireContainer,\n      children: [_jsx(Avatar, {\n        data: userData\n      }), _jsxs(View, {\n        style: styles.statusContainer,\n        children: [_jsx(Text, {\n          style: styles.title,\n          children: \"Username: \"\n        }), _jsxs(Text, {\n          style: styles.body,\n          children: [user.user_metadata.username, \" \"]\n        }), _jsx(Text, {\n          style: styles.title,\n          children: \"About me: \"\n        }), _jsxs(Text, {\n          style: styles.body,\n          children: [details, \" \"]\n        })]\n      }), _jsx(View, {\n        style: styles.updatebutton,\n        children: _jsx(OutlinedButton, {\n          icon: \"create\",\n          onPress: showModal,\n          children: \"Update Status\"\n        })\n      })]\n    })]\n  });\n};\n\nexport default ProfileScreen;\nvar styles = StyleSheet.create({\n  entireContainer: {\n    flex: 1,\n    backgroundColor: 'white'\n  },\n  statusContainer: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  title: {\n    fontSize: 30,\n    textAlign: 'center',\n    marginBottom: 5\n  },\n  body: {\n    fontSize: 20,\n    fontFamily: \"AvenirNext-Italic\",\n    textAlign: 'center',\n    marginBottom: 20\n  },\n  updatebutton: {\n    marginBottom: 80\n  }\n});","map":{"version":3,"names":["useState","useContext","useEffect","Modal","Portal","Text","Button","Provider","ProfileForm","Avatar","supabase","UserContext","OutlinedButton","ProfileScreen","visible","setVisible","userData","setUserData","details","setDetails","loading","setLoading","user","showModal","hideModal","containerStyle","backgroundColor","padding","getUserData","from","select","eq","id","error","data","status","subscription","on","payload","new","subscribe","removeSubscription","styles","entireContainer","statusContainer","title","body","user_metadata","username","updatebutton","StyleSheet","create","flex","alignItems","justifyContent","fontSize","textAlign","marginBottom","fontFamily"],"sources":["/Users/hanyang/Orbital2022/screens/ProfileScreen.js"],"sourcesContent":["import { useState, useContext, useEffect } from \"react\";\nimport { StyleSheet, View, ActivityIndicator } from \"react-native\";\n\nimport { Modal, Portal, Text, Button, Provider } from 'react-native-paper';\n\nimport ProfileForm from \"../components/profile/ProfileForm\";\n\nimport Avatar from '../components/profile/Avatar';\n\nimport { supabase } from \"../utils/supabase\";\n\nimport { UserContext } from \"../contexts/userContext\";\nimport OutlinedButton from \"../components/Buttons/OutlinedButton\";\n\n// import { ActivityIndicator } from 'react-native-paper';\n\n/* polyfills */\n/** URL polyfill */\nimport 'react-native-url-polyfill/auto';\n\n\nconst ProfileScreen = () => {\n    \n  const [visible, setVisible] = useState(false);\n  const [userData, setUserData] = useState(null)\n  const [details, setDetails] = useState('Tell us more about yourself!')\n  const [loading, setLoading] = useState(true); \n  \n\n  const { user } = useContext(UserContext)\n\n  const showModal = () => setVisible(true);\n  const hideModal = () => setVisible(false);\n  const containerStyle = {backgroundColor: 'white', padding: 20};\n\n  useEffect(() => {\n    const getUserData = async () => {\n      const { error, data } = await supabase\n        .from('users')\n        .select('*')\n        .eq('id', user.id)\n\n        setUserData(data)\n        setLoading(false)\n        setDetails(data[0].status)   \n    }\n\n    getUserData();\n  }, [])\n\n  useEffect(() => {\n        const subscription = supabase\n            .from('users')\n            .on('UPDATE', (payload) => {\n                setDetails(() => setDetails(payload.new.status))\n            })\n            .subscribe();\n        \n        return () => {\n            supabase.removeSubscription(subscription)\n        }\n\n    }, [])\n\n\n  return (\n\n    <Provider>\n      <Portal>\n        <Modal visible={visible} contentContainerStyle={containerStyle}>\n          <ProfileForm \n            onPressHandler={hideModal}\n          />\n        </Modal>\n      </Portal>\n\n    {loading ? <ActivityIndicator size=\"small\" color=\"#0000ff\" /> :\n\n      <View style={styles.entireContainer}>\n        <Avatar data={userData}/>\n        <View style={styles.statusContainer}>\n          <Text style={styles.title}>Username: </Text>\n          <Text style={styles.body}>{user.user_metadata.username} </Text>\n          <Text style={styles.title}>About me: </Text>\n          <Text style={styles.body}>{details} </Text>\n        </View>\n\n        <View style = {styles.updatebutton}>\n\n          <OutlinedButton icon=\"create\" onPress={showModal}>\n            Update Status\n          </OutlinedButton>\n\n        </View>\n\n      </View>\n      }\n    </Provider>\n  );\n}\n\nexport default ProfileScreen; \n\n\nconst styles = StyleSheet.create({\n\nentireContainer:{ \n  flex: 1,\n  backgroundColor: 'white'\n},\n\nstatusContainer: { \n  flex: 1, \n  alignItems: 'center', \n  justifyContent: 'center' \n},\n  \ntitle: {\n    fontSize: 30, \n    textAlign: 'center',\n    marginBottom: 5\n},\n\nbody: {\n  fontSize: 20, \n  fontFamily: \"AvenirNext-Italic\",\n  textAlign: 'center',\n  marginBottom: 20\n},\n\nupdatebutton:{\n  marginBottom: 80\n}\n\n\n});"],"mappings":"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"},"metadata":{},"sourceType":"module"}